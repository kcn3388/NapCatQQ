const _0x222d01=_0x364f;(function(_0x15138a,_0x5508ca){const _0x29b39c=_0x364f,_0x57b48b=_0x15138a();while(!![]){try{const _0x5ab353=-parseInt(_0x29b39c(0x1d2))/0x1*(parseInt(_0x29b39c(0x1c2))/0x2)+parseInt(_0x29b39c(0x1bb))/0x3*(-parseInt(_0x29b39c(0x1cd))/0x4)+parseInt(_0x29b39c(0x1c7))/0x5*(-parseInt(_0x29b39c(0x1d6))/0x6)+-parseInt(_0x29b39c(0x1d0))/0x7+parseInt(_0x29b39c(0x1d7))/0x8+-parseInt(_0x29b39c(0x1b5))/0x9+parseInt(_0x29b39c(0x1d8))/0xa*(parseInt(_0x29b39c(0x1b4))/0xb);if(_0x5ab353===_0x5508ca)break;else _0x57b48b['push'](_0x57b48b['shift']());}catch(_0x2d3fc4){_0x57b48b['push'](_0x57b48b['shift']());}}}(_0x4071,0x361a8));import{selfInfo}from'@/common/data';import{log}from'@/common/utils/log';import{sleep}from'@/common/utils/helper';import{napCatCore}from'@/core';import{MsgListener}from'@/core/qqnt/listeners';function _0x364f(_0x3bf5bc,_0x129fd3){const _0x4071c2=_0x4071();return _0x364f=function(_0x364f48,_0x42dbfc){_0x364f48=_0x364f48-0x1a2;let _0x83536c=_0x4071c2[_0x364f48];return _0x83536c;},_0x364f(_0x3bf5bc,_0x129fd3);}function _0x4071(){const _0x2a5477=['sendStatus','guildId','2442979bovWoT','forwardMsg','21HvtRFb','catch','forEach','msg','11922mYStNT','1745320SJOLNu','20XDVQBj','app','arkElement','com.tencent.multimsg','ElpFt','poEyp','eNdta','setMsgRead','ArDzB','service','parse','发送超时','OwlSo','wqZdH','kRNpl','addLoginSuccessCallback','SJebt','sendMsg','elements','onAddSendMsg','getMsgsIncludeSelf','9712439HrOddz','2862153rQJhFa','recallMsg','peerUid','activateChatAndGetHistory','addMsgListener','kernelService','9vwSRUx','getMultiMsg','msgId','map','then','NPMRX','nick','36638xFgwnj','uid','fetchRecentContact','MkBTx','find','945RvIXXE','bytesData','multiForwardMsgWithComment','chatType','IuPfz','转发消息超时','446932qibpGT'];_0x4071=function(){return _0x2a5477;};return _0x4071();}import{randomUUID}from'crypto';const sendMessagePool={},sendSuccessCBMap={},msgListener=new MsgListener();msgListener[_0x222d01(0x1b2)]=_0x366350=>{const _0x2beff0=_0x222d01,_0x4b0e82={'syosx':function(_0x13ac87,_0x3e0e3d){return _0x13ac87 instanceof _0x3e0e3d;}};if(sendMessagePool[_0x366350[_0x2beff0(0x1b7)]]){const _0x5743c8=sendMessagePool[_0x366350[_0x2beff0(0x1b7)]]?.(_0x366350);_0x4b0e82['syosx'](_0x5743c8,Promise)&&_0x5743c8[_0x2beff0(0x1bf)]()[_0x2beff0(0x1bf)](log);}},msgListener['onMsgInfoListUpdate']=_0x1fa7cc=>{const _0xc7232c=_0x222d01,_0x5cb4ac={'MkBTx':function(_0x1b0cdd,_0x5f4dae){return _0x1b0cdd(_0x5f4dae);},'ArDzB':function(_0x3ce202,_0x5a7224){return _0x3ce202 instanceof _0x5a7224;}};_0x1fa7cc[_0xc7232c(0x1d4)](_0x50d98c=>{const _0x17c781=_0xc7232c;new Promise((_0x12c5bf,_0x50ec04)=>{const _0x20020a=_0x364f;for(const _0x4d3699 in sendSuccessCBMap){const _0x4cc593=sendSuccessCBMap[_0x4d3699],_0x3238db=_0x5cb4ac[_0x20020a(0x1c5)](_0x4cc593,_0x50d98c),_0x225c09=_0x5b97c1=>{_0x5b97c1&&delete sendSuccessCBMap[_0x4d3699];};_0x5cb4ac[_0x20020a(0x1a7)](_0x3238db,Promise)?_0x3238db[_0x20020a(0x1bf)](_0x225c09):_0x225c09(_0x3238db);}})[_0x17c781(0x1bf)]()[_0x17c781(0x1d3)](log);});},setTimeout(()=>{const _0x4cdf98=_0x222d01;napCatCore[_0x4cdf98(0x1ae)](()=>{const _0x3e822e=_0x4cdf98;napCatCore[_0x3e822e(0x1a8)]['msg'][_0x3e822e(0x1b9)](msgListener);});},0x64);export class NTQQMsgApi{static ['napCatCore']=null;static async[_0x222d01(0x1bc)](_0x13f379,_0x26ae1e,_0x42f921){const _0x135de2=_0x222d01;return napCatCore[_0x135de2(0x1a8)][_0x135de2(0x1d5)][_0x135de2(0x1ba)]?.[_0x135de2(0x1bc)](_0x13f379,_0x26ae1e,_0x42f921);}static async['activateChat'](_0x390b6e){}static async[_0x222d01(0x1b8)](_0x2ece00){}static async['setMsgRead'](_0x2da7ff){const _0x13e269=_0x222d01;return napCatCore[_0x13e269(0x1a8)][_0x13e269(0x1d5)][_0x13e269(0x1ba)][_0x13e269(0x1a6)](_0x2da7ff['chatType'],_0x2da7ff[_0x13e269(0x1b7)],_0x2da7ff[_0x13e269(0x1cf)]);}static async['getMsgHistory'](_0x9a8ce2,_0x653fe4,_0x10a03b){const _0x2afe38=_0x222d01;return napCatCore[_0x2afe38(0x1a8)][_0x2afe38(0x1d5)][_0x2afe38(0x1ba)][_0x2afe38(0x1b3)](_0x9a8ce2,_0x653fe4,_0x10a03b,!![]);}static async[_0x222d01(0x1c4)](){}static async[_0x222d01(0x1b6)](_0x57e794,_0x444f51){const _0x3862fc=_0x222d01;await napCatCore[_0x3862fc(0x1a8)][_0x3862fc(0x1d5)][_0x3862fc(0x1ba)]?.['recallMsg']({'chatType':_0x57e794[_0x3862fc(0x1ca)],'peerUid':_0x57e794[_0x3862fc(0x1b7)]},_0x444f51);}static async[_0x222d01(0x1b0)](_0x7a5e01,_0x4d50d2,_0x41f771=!![],_0x2f2865=0x2710){const _0x2dde1f=_0x222d01,_0x67ce76={'kRNpl':function(_0x4b50c2,_0x1f2b4c){return _0x4b50c2(_0x1f2b4c);},'OwlSo':function(_0x4dbc14,_0x3d3181){return _0x4dbc14(_0x3d3181);},'wqZdH':_0x2dde1f(0x1aa),'Bksjk':function(_0x41c2c7){return _0x41c2c7();}},_0xeffdfa=_0x7a5e01[_0x2dde1f(0x1b7)];let _0x227c40=0x0;const _0x445e11=async()=>{const _0x1f6ae1=_0x2dde1f;if(_0x227c40>_0x2f2865)throw'发送超时';const _0x302f77=sendMessagePool[_0x7a5e01[_0x1f6ae1(0x1b7)]];if(_0x302f77)return await _0x67ce76[_0x1f6ae1(0x1ad)](sleep,0x1f4),_0x227c40+=0x1f4,await _0x445e11();else return;};return await _0x445e11(),new Promise((_0x31a98a,_0x28f203)=>{const _0x36f401=_0x2dde1f,_0x3766c6={'NPMRX':function(_0x2423b4,_0x4db309){const _0xf1fcfc=_0x364f;return _0x67ce76[_0xf1fcfc(0x1ab)](_0x2423b4,_0x4db309);},'OBvUT':function(_0x431d9e,_0x3ef95c){return _0x431d9e(_0x3ef95c);},'IuPfz':_0x67ce76[_0x36f401(0x1ac)]};let _0x317519=![],_0x1a1f27=null;const _0x38d832=_0x67ce76['Bksjk'](randomUUID);sendSuccessCBMap[_0x38d832]=_0x5121fd=>{const _0x23b8b2=_0x36f401;if(_0x5121fd[_0x23b8b2(0x1bd)]===_0x1a1f27?.[_0x23b8b2(0x1bd)]){if(_0x5121fd[_0x23b8b2(0x1ce)]===0x2)return delete sendSuccessCBMap[_0x38d832],_0x317519=!![],_0x3766c6[_0x23b8b2(0x1c0)](_0x31a98a,_0x5121fd),!![];return![];}return![];},sendMessagePool[_0xeffdfa]=async _0x5c9bef=>{delete sendMessagePool[_0xeffdfa],_0x1a1f27=_0x5c9bef;},setTimeout(()=>{const _0x1a6c24=_0x36f401;if(_0x317519)return;delete sendMessagePool[_0xeffdfa],delete sendSuccessCBMap[_0x38d832],_0x3766c6['OBvUT'](_0x28f203,_0x3766c6[_0x1a6c24(0x1cb)]);},_0x2f2865);const _0xcb5ea6=napCatCore[_0x36f401(0x1a8)][_0x36f401(0x1d5)][_0x36f401(0x1ba)]?.['sendMsg']('0',_0x7a5e01,_0x4d50d2,new Map());});}static async[_0x222d01(0x1d1)](_0x4e5968,_0x499fdf,_0xfc2e8){}static async['multiForwardMsg'](_0x213df6,_0xbf27b3,_0x458467){const _0x89ac13=_0x222d01,_0x331ef3={'poEyp':function(_0x219f5c,_0x13e009){return _0x219f5c==_0x13e009;},'ElpFt':function(_0x222392,_0x1d8fad){return _0x222392==_0x1d8fad;},'SJebt':function(_0x28d546,_0x26a87a){return _0x28d546(_0x26a87a);},'vJmyB':_0x89ac13(0x1cc),'eNdta':function(_0x2b0c5f,_0x4281b4,_0x4ae4ae){return _0x2b0c5f(_0x4281b4,_0x4ae4ae);}},_0x425b29=_0x458467[_0x89ac13(0x1be)](_0x323632=>{const _0x3618d1=_0x89ac13;return{'msgId':_0x323632,'senderShowName':selfInfo[_0x3618d1(0x1c1)]};});return new Promise((_0x1b13db,_0x101af7)=>{const _0x17104a=_0x89ac13;let _0x4a2c9e=![];const _0x44c6b0=new MsgListener(),_0x7f4ca4=_0x4d1658=>{const _0xce710=_0x364f,_0x5a0ca7=_0x4d1658[_0xce710(0x1b1)][_0xce710(0x1c6)](_0x5d7c35=>_0x5d7c35[_0xce710(0x1da)]);if(!_0x5a0ca7)return;const _0x17541f=JSON[_0xce710(0x1a9)](_0x5a0ca7[_0xce710(0x1da)][_0xce710(0x1c8)]);if(_0x17541f[_0xce710(0x1d9)]!=_0xce710(0x1a2))return;_0x331ef3[_0xce710(0x1a4)](_0x4d1658[_0xce710(0x1b7)],_0xbf27b3[_0xce710(0x1b7)])&&_0x331ef3[_0xce710(0x1a3)](_0x4d1658['senderUid'],selfInfo[_0xce710(0x1c3)])&&(_0x4a2c9e=!![],napCatCore[_0xce710(0x1a8)]['msg']['kernelService']?.['removeKernelMsgListener'](_0x5a1a0b),_0x331ef3[_0xce710(0x1af)](_0x1b13db,_0x4d1658));};_0x44c6b0[_0x17104a(0x1b2)]=_0x7f4ca4;const _0x5a1a0b=napCatCore[_0x17104a(0x1a8)]['msg'][_0x17104a(0x1b9)](_0x44c6b0);_0x331ef3[_0x17104a(0x1a5)](setTimeout,()=>{const _0x154678=_0x17104a;!_0x4a2c9e&&(napCatCore['service']['msg']['kernelService']?.['removeKernelMsgListener'](_0x5a1a0b),_0x331ef3[_0x154678(0x1af)](_0x101af7,_0x331ef3['vJmyB']));},0x1388),napCatCore[_0x17104a(0x1a8)][_0x17104a(0x1d5)]['kernelService']?.[_0x17104a(0x1c9)](_0x425b29,_0x213df6,_0xbf27b3,[],new Map());});}}