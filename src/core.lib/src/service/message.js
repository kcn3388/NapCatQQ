var _0x56d664=_0xb439;function _0xb439(_0x4b0269,_0x1d12d3){var _0x151a08=_0x151a();return _0xb439=function(_0xb439d4,_0x2bd608){_0xb439d4=_0xb439d4-0xac;var _0x3c5897=_0x151a08[_0xb439d4];return _0x3c5897;},_0xb439(_0x4b0269,_0x1d12d3);}(function(_0x18a7f9,_0x45c875){var _0x55786e=_0xb439,_0xf30b83=_0x18a7f9();while(!![]){try{var _0x414d43=-parseInt(_0x55786e(0xb8))/0x1*(parseInt(_0x55786e(0xb4))/0x2)+-parseInt(_0x55786e(0xb0))/0x3*(parseInt(_0x55786e(0xaf))/0x4)+-parseInt(_0x55786e(0xbe))/0x5+-parseInt(_0x55786e(0xb1))/0x6+-parseInt(_0x55786e(0xc3))/0x7*(parseInt(_0x55786e(0xbc))/0x8)+parseInt(_0x55786e(0xac))/0x9*(-parseInt(_0x55786e(0xbb))/0xa)+parseInt(_0x55786e(0xb7))/0xb;if(_0x414d43===_0x45c875)break;else _0xf30b83['push'](_0xf30b83['shift']());}catch(_0x25300b){_0xf30b83['push'](_0xf30b83['shift']());}}}(_0x151a,0x7e5bc));import{Wrapper as _0x394653}from'../qqnt';import{MsgListener}from'../qqnt/listeners';function _0x151a(){var _0x13a044=['onMsgInfoListUpdate','init','2956DEReFa','2274skipKU','3044508LMSKjQ','listener','kernelService','4pbiHjh','addMsg','yolVj','39112590dEOJyF','351539iKOVAy','getMsgByLongId','NodeIKernelMsgListener','2740wcuQUm','8pGocML','map','974115PlcgYC','recallTime','catch','msgId','updateMsg','1589567wicvHx','then','27774yHWCgl'];_0x151a=function(){return _0x13a044;};return _0x151a();}import{dbUtil}from'@/common/utils/db';export class NapCatCoreServiceMessage{[_0x56d664(0xb3)]=null;[_0x56d664(0xb2)];constructor(){var _0x50b426=_0x56d664,_0x20785b={'htHiz':function(_0x4a27d8,_0x222c8c){return _0x4a27d8===_0x222c8c;}};this[_0x50b426(0xb2)]=new MsgListener(),this[_0x50b426(0xb2)][_0x50b426(0xad)]=_0x1c3a32=>{var _0x30f16e=_0x50b426;_0x1c3a32[_0x30f16e(0xbd)](_0x33793b=>{var _0x37cc5d=_0x30f16e;_0x20785b['htHiz'](_0x33793b[_0x37cc5d(0xbf)],'0')?dbUtil[_0x37cc5d(0xb5)](_0x33793b)[_0x37cc5d(0xc4)]()[_0x37cc5d(0xc0)]():dbUtil[_0x37cc5d(0xb9)](_0x33793b[_0x37cc5d(0xc1)])[_0x37cc5d(0xc4)](_0x36ec59=>{var _0x19796a=_0x37cc5d;_0x36ec59&&(_0x36ec59['recallTime']=_0x33793b['recallTime'],dbUtil[_0x19796a(0xc2)](_0x36ec59)[_0x19796a(0xc4)]());});});};}[_0x56d664(0xae)](_0xee3e6e){var _0x48a0d1=_0x56d664,_0x1b363f={'usTYA':function(_0x59aa08,_0x25f732){return _0x59aa08!==_0x25f732;},'yolVj':'MessageService\x20already\x20initialized!'};if(_0x1b363f['usTYA'](this[_0x48a0d1(0xb3)],null))throw new Error(_0x1b363f[_0x48a0d1(0xb6)]);this[_0x48a0d1(0xb3)]=_0xee3e6e,this[_0x48a0d1(0xb3)]['addKernelMsgListener'](new _0x394653[(_0x48a0d1(0xba))](this['listener']));}['addMsgListener'](_0x388d81){var _0x5d044e=_0x56d664;return this['kernelService']?.['addKernelMsgListener'](new _0x394653[(_0x5d044e(0xba))](_0x388d81));}}